# 前缀编码

## 词语的前缀编码

本方案使用统一的规则来编码所有不同长度的词：

> 先打各个音节的声母编码；如果首选未命中，追加末音节的韵母编码；如果首选仍未命中，追加首音节的韵母编码。

其中，如果某编码是首音节的韵母，或者是整个编码的第五个或之后的编码，则需要用大写字母来输入。

各个音节的声母是首先必须要打的，后面追加的编码称为「补码」，可能有 0 ~ 2 个。到底需要打多少个补码，取决于词的频率，常用的词打得少，不常用的词就打得多。以下针对不同长度的词分别举几个例子：

1. 单音节词：「有」的编码为 `f`，「又」的编码为 `fo`，「由」的编码为 `fou`；
2. 双音节词：「你好」的编码为 `nh`，「希望」的编码为 `xsi`，「手机」的编码为 `vjii`，「冰雪」的编码为 `bxoui`，「元气」的编码为 `kqiaoo`；
3. 三音节词：「为什么」的编码为 `svm`，「变压器」的编码为 `bfqi`，「最低点」的编码为 `zdduo`；
4. 四音节词：「感同身受」的编码为 `gtvv`，「将计就计」的编码为 `jjjji`，「附庸风雅」的编码为 `ffffuu`；
5. 多音节词：「科学发展观」的编码为 `kxfzG`，「哀莫大于心死」的编码为 `vmdyXS`，「中华人民共和国」的编码为 `zhrmGHG`。以此类推，$n$ 音节词的编码可能为 $n$ 码到 $n+2$ 码不等。

由于动态调频的存在，实际输入的编码可能与上述介绍有细微的差异。

## 单字的前缀编码

单字的编码分为 4 类：全息编码、常用编码、短编码和长编码。所有字都有全息编码和常用编码，部分高频非字根字有短编码，部分低频字根字有长编码。

| 汉字     | 全息 | 常用 | 短   | 长   |
| -------- | ---- | ---- | ---- | ---- |
| 字根字   | ✅   | ✅   | ❌   | 部分 |
| 非字根字 | ✅   | ✅   | 部分 | ❌   |

### 全息编码

全息打法与词语的规则相同，即先打各个字根的声码，追加末字根的韵码，再追加首字根的韵码。

### 常用编码

常用打法为：先打第一、二、三、末字根的声码，如果字根数量小于等于 3 则追加末字根的韵码。

### 短编码

1. 「韵」码：7 个，的 `e`、我 `o`、是 `i`、不 `u`、了 `a`、在 `;`、和 `/`
2. 「声空」和「声韵」码：120 个，第一码为字的第一码，第二码无理；
3. 「声声空」码：441 个，取字的前两码。只有三根及以上字可能有此种编码；
4. 「声声声空」码：若干，取字的前三码。只有四根及以上字可能有此种编码。

### 长编码

有时可能出现同一个编码对应两个以上字根，或者低频的字根字把自己的位置让出来给高频字的短编码，此时可以在编码前加上一或两个「重」键，其规律如下：

1. 通用规范范围内的字根字，若在常用编码上不是首选，则存在「重声韵」码；
2. 非通用规范，但国字常用范围内的字根字，若在常用编码上不是首选，则存在「重声韵」码或「重重声韵」码；
3. 其他字根字，一律使用「重重声韵」编码。
