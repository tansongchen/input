# 冰雪键道

## 什么是冰雪键道？

冰雪键道是使用冰雪拼音重新实现的[星空键道 v6](https://xkinput.github.io) 输入方案。相较于星空键道及各个改版，它提供了更好用的自动造词、动态码长、动态调频功能。您可以先查看星空键道的[文档](http://pingshunhuangalex.gitbook.io)学习，然后下载冰雪拼音方案文件来使用。

## 构词规则的差异

冰雪键道的五字及以上词构词规则与星空键道有所不同。在星空键道中，五字及以上词的打法为第一、二、三和末字的声母加上前两个字的笔画；但在冰雪拼音体系内，由于无法采用这样的逻辑来查询词典，因此改为用前四个字的声母加上前两个字的笔画。例如，「三下五除二」的编码为 `sxwjvv`：
![rime](https://images.tansongchen.com/1741308360.png)
在有些情况下，使用这种方式输入可能会导致重码较为显著。例如，「科学发展观」的编码为 `kxfquo`，与「科学发展」相同；「中华人民共和国」的编码为 `fhrmii`，与「中华人民」相同：
![rime](https://images.tansongchen.com/1741308074.png)
![rime](https://images.tansongchen.com/1741308132.png)
因此，本方案还提供了另一种方法来重码更低地输入多字词，即先输入前四个字的声母，然后用大写字母继续输入其余的声母，这样既不影响顶功，又增加了多字词的信息量。例如，输入 `kxfqG`，「科学发展观」就出现在首选：
![rime](https://images.tansongchen.com/1741308650.png)

由于冰雪键道是动态调频的，因此用户在实际使用中可以结合上述两种方法：对于没打过或重码较多的词，宜使用大写字母补全后续的声母以尽快筛选；对于已经打过或重码较少的词，宜用常规方法通过补充笔画将其提升到首选，这样可以避免输入大写字母。

## 动态调频与动态码长

冰雪键道采用动态调频策略，用户打过的词会出现在候选中更靠前的位置。由于键道可以通过追加形码来进一步区分词语，因此本策略使得码长在输入中也可以动态变化，这个特性称为动态码长。例如，用户第一次想打「史诗」时，输入 `ekek` 的时候整个第一页都没有想要的词，需要输入到 `ekekio` 才能将「史诗」提到首选。但输入过一次「史诗」之后，下一次只需要 `ekek` 就能输入「史诗」：
![rime](https://images.tansongchen.com/1741309030.png)
![rime](https://images.tansongchen.com/1741309436.png)
不过，考虑到保持原有的用户习惯，对于一字词和特殊简码（声声简词、630 简词）不使用动态调频策略。这些固定的编码定义在 `snow_jiandao.fixed.txt` 中，如果想要调整请直接修改这个文件。

## 自动造词

冰雪键道造词的方法为：在没有输入编码的情况下，按 `v` 进入造词模式，然后将想造词的内容拆分成较小的单位来完成输入，此时输入的内容会积累在缓冲区中而不上屏。输入完想造词的内容后，再按一次空格，此时缓冲区中的内容上屏，同时也完成了造词。

下面以造「冰雪键道」这个词为例：首先按 `v`，此时会提示「造词」（取决于前端的实现，也可能不会有提示），然后输入 `bgxhjmdz`（此时的输入逻辑与平时相同，顶功的功能也有效，因此 `j` 会把 `bgxh` 对应的首选「冰雪」顶上屏），如下图所示：
![rime](https://images.tansongchen.com/1741309930.png)
然后空格确认「键道」，这样想要造词的内容就全部进入了缓冲区：
![rime](https://images.tansongchen.com/1741310062.png)
再按一次空格，「冰雪键道」上屏，同时也完成了造词。
![rime](https://images.tansongchen.com/1741310151.png)

注意，在拆分输入的过程中不能使用 630 简码（因为这些是特殊的简码，系统中没有这些简码对应的完整拼音，会导致造词失败）。另外，如果是在输入过程中才想起来造词，此时不能按 `v` 进入造词模式（因为它通常代表追加形码），而是需要按 `Control+j` 进入造词模式。

这种造词方式非常灵活，可以以任意方式拆分任意次来输入，例如二字加二字得到四字词、一字加二字得到一字词、二字加三字得到五字词等等。但是，其缺点就是必须提前想好要造词，按照拆分的方式来输入，如果已经不小心按照词的编码来打了，就需要先清空再完成造词。

为了部分地解决这个问题，对于「一字加一字得到二字词」这种比较常见的情况提供了另一种造词方式，即定位补码造词。例如，想打「星猫」一词时已经按词的编码输入了 `xgmz`，发现候选中没有「星猫」这个词；此时不必清空，而是可以直接按 `Control+l` 来定位到前二码 `xg` 的后面，如图所示：
![rime](https://images.tansongchen.com/1741310705.png)
此时可以补充「星」的形码 `oi` 将其提到首选：
![rime](https://images.tansongchen.com/1741310776.png)
空格确认后，再补充「猫」的形码 `ua`：
![rime](https://images.tansongchen.com/1741310816.png)
再次空格后，「星猫」上屏，同时也造好了词「星猫」。
![rime](https://images.tansongchen.com/1741311080.png)

这种造词方式的优点是可以复用已有的编码。
