# 高级功能

## 英数混输造词

在科技与流行文化中，经常出现混有英文、数字的词语的情况。为了让这些词也能够自动造词，本方案给 10 个阿拉伯数字、26 个大写英文字母、26 个小写英文字母也指定了相应的音节码。

- 阿拉伯数字与相应中文数字（一～零）相同，中文数字固定在三码的首选，阿拉伯数字固定在三码的次选；
- 英文字母的音节码规定为
    - 辅音字母加后缀 `oo`，例如 b 的音节码是 `boo`
    - 元音字母加前缀 `se`，例如 a 的音节码是 `sea`
    - 除了 j, q, x, k 这些字母外，所有大写字母固定在三码的首选，所有小写字母固定在三码的次选
    - 对于 j, q, x, k 由于首选已经被 `*oo` 的高频字占据，因此所有大写字母固定在三码的次选，所有小写字母固定在三码的三选

使用这些候选，就可以轻易造出如「5G通信」「哆啦A梦」这样的词：

![rime](https://images.tansongchen.com/1716500410.png)

## 略码

略码是输入特定结构的词的办法，能够避免一些词带来的不确定性，同时明显减少输入单字的机会。以下我们用全角字母「ＡＢＣ……」来表示词中的待定成分。

由于本方案中「的」和「了」是一键字，且可以标点顶屏，所以「Ａ的」「Ａ了」「ＡＢ的」「ＡＢ了」这样的词就不必按词打，打完前面的部分之后打相应的标点键就可以了，这也是一种特殊的略码。下面是更一般的略码形式：

### 完整重复

完整重复整个词的「ＡＡ」、「ＡＢＡＢ」、「ＡＢＣＡＢＣ」……型：略码为 `[`，如「吃吃」是 `yi[`；双音节及以上的词，因为 `[` 已经被占用，所以略码为 `A`，如「尝试尝试」是 `yviA`。

对二字词来说，还有一种特殊的「ＡＡＢＢ」型，略码为 `O`，如「可可爱爱」是 `krO`。

### 部分重复

重复词的首字或末字的「ＡＡＢ」、「ＡＢＢ」、「ＡＡＢＣ」……型，略码为 `E`（重复首字）和 `I`（重复末字）：如「打打牌」是 `dpaiE`，「打打篮球」是 `dlqouE`，「睡觉觉」是 `vjuI`。

### 插入重复

「Ａ不Ａ」「Ａ一Ａ」「Ａ的Ａ」「Ａ了Ａ」「Ａ了一Ａ」「Ａ啊Ａ」「Ａ呀Ａ」型：略码分别为 `B`, `F`, `D`, `L`, `K`, `R`, `U`，如「好不好」是 `haB`；「ＡＢ不ＡＢ」以及更长的词也一样，比如「可爱不可爱」 `krB` 打出来。这里 `B, F, D, L, R` 表示的是相应插入成分的声码，便于记忆。

「Ａ着Ａ着」：略码为 `W`，表示「着」的声码

「Ａ来Ａ去」：略码为 `Q`，表示「去」的声码

### 其余略码形式

还有一些常见的略码形式没有安排，可以根据自己的需要来设计：

「Ａ个Ｂ」：只插入不重复，如「吃个饭」

「Ａ了ＡＢ」「Ａ不ＡＢ」「Ａ里ＡＢ」：既重复又省略了一个字，如「开不开心」

## 以词定字

虽然本方案在大多数情况下输入单字不需要选重，但是对于某些生僻字可能以词定字会更快一些。首先输入词的编码，然后按 `[` 上屏词的首字，按 `]` 上屏词的末字。

## 辅助码

辅助码是另一种输入生僻字的办法，但是需要借助字形信息。

### 笔画辅助码

笔画辅助码是在单音节词的音节码输入完成之后直接继续输入笔画来筛选的办法，其中横竖撇捺折分别用 `e, i, u, o, a` 来表示，这与声笔系列码相同。笔画最多可以输入 4 笔。例如，输入生僻字「芫」，在音节码 kooe 输入完成之后继续加两个笔画 ei，即出现在首页。

![rime](https://images.tansongchen.com/1716501142.png)

不过，因为无韵尾音节编为 3 码、而有韵尾音节编为 4 码，所以无韵尾音节在补笔画的时候也可能会和其他音节冲突。为了改进选重体验，可以打一个 `o` 补全 4 码，然后再输入笔画，这样就没有歧义了。例如，输入生僻字「翊」，在音节码 kooe 输入完成之后继续加两个笔画 oe，即出现在首页。

![rime](https://images.tansongchen.com/1716501279.png)

笔画辅助码也能够顶功，在输入辅助码的过程中若所要的字为首选，继续输入下一个字的编码即可顶上屏。

### 部首辅助码

有些情况下，生僻字的笔顺可能不熟悉，或者不能很好地被笔画离散开，例如要输入「嶅」，但是声旁为「敖」的字笔画都一样：

![rime](https://images.tansongchen.com/1716501397.png)

为此，本方案还提供了另一套部首辅助码。这个辅助码基于 GF0012-2009 国家规范，每个字有唯一指定的部首，而字的辅助码就是部首的音节码。要使用部首辅助码，需要先按一下 1，然后再输入部首的音节码：

这里「嶅」的辅助码即「山」的音节码 vaoi，只输入一码就可以将所要的字提到首选：

![rime](https://images.tansongchen.com/1716502212.png)

另外，由于这种辅助码使用了 1 作为引导键，所以无韵尾音节不需要补 o 也可以使用辅助码，例如

![rime](https://images.tansongchen.com/1716502543.png)

在不清楚声调的情况下，也可以打完 2 码就加辅助码：

![rime](https://images.tansongchen.com/1716502659.png)

部首辅助码也能够顶功，在输入辅助码的过程中若所要的字为首选，继续输入下一个字的编码即可顶上屏。

## 反查

本方案提供两种反查方式：拼音反查和笔画反查

### 拼音反查

虽然本方案本身就是音码方案，但是考虑到用户可能忘记某个音节的拼写，或者知道其中一个读音想查询其他的读音，所以提供拼音反查功能。拼音反查需要用 `a` 键引导。例如，输入 `ahe`，可以查询到「和」的 6 个读音对应的拼写：

![rime](https://images.tansongchen.com/1716774891.png)

### 笔画反查

笔画反查依赖于 Rime 自带的「五笔画 / stroke」方案。笔画反查需要用 `u` 引导，并用 `e, i, u, o, a` 来输入横竖撇捺折，这与辅助码是一样的。例如，输入 `ueiuoa`，得到

![rime](https://images.tansongchen.com/1716842257.png)

## 重复上屏

若已经输入过一些内容，可以用 `e` 键来调出上屏历史，然后选择上屏。例如，使用 `yfu` 输入「重复」之后，「重复」就出现在 `e` 的首选：

![rime](https://images.tansongchen.com/1716775459.png)

## 符号

`e` 键同时还承担了输入特殊符号的功能。例如，输入 `ea` 可以得到 a 的各种变体字母：

![rime](https://images.tansongchen.com/1716775535.png)

具体的符号内容和 Rime 自带的 `symbols.yaml` 相同，只是引导键变成了 `e`。

## lua 脚本

`o` 键可以引导调用一系列 lua 脚本。例如，o 加数字可以转换中文数字：

![rime](https://images.tansongchen.com/1716775852.png)

还可以计算任意 lua 表达式：

![rime](https://images.tansongchen.com/1716775872.png)

## 附录：非成字部首的读音

| 部首 | 读音   |
| ---- | ------ |
| 一   | heng2  |
| 丨   | shu4   |
| 丿   | pie3   |
| 丶   | dian3  |
| 乛   | zhe2   |
| 匚   | fang1  |
| 冂   | jiong1 |
| 勹   | bao1   |
| 亠   | tou2   |
| 冫   | bing1  |
| 冖   | mi4    |
| 凵   | kan3   |
| 卩   | jie2   |
| 厶   | si1    |
| 廴   | yin3   |
| 艹   | cao3   |
| 廾   | gong3  |
| 囗   | wei2   |
| 彡   | shan1  |
| 夂   | zhi3   |
| 丬   | pan2   |
| 宀   | mian2  |
| 辶   | chuo4  |
| 彐   | ji4    |
| 屮   | che4   |
| 巛   | chuan1 |
| 攵   | pu1    |
| 罒   | wang3  |
| 疒   | ne4    |
| 疋   | ya3    |
| 癶   | bo1    |
| 虍   | hu1    |
| 纟   | si1    |
| 龺   | zhuo2  |
| 髟   | biao1  |
| 鬥   | dou4   |
